/*! jquery-layout 05-10-2014 */
!function(a){function b(a,b){if("number"==typeof a&&"number"==typeof b)return a-b;if(!a&&!b)return 0;if(!a&&b)return 1;if(a&&!b)return-1;var c,d,e,f,g,h,i=0,j=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g;if(a===b)return 0;for(c=a.toLowerCase().match(j),d=b.toLowerCase().match(j),h=c.length;h>i;){if(!d[i])return 1;if(e=c[i],f=d[i++],e!==f)return g=e-f,isNaN(g)?e>f?1:-1:g}return d[i]?-1:0}function c(b){var c=b.cloneNode();c.style.height="",b.parentNode.insertBefore(c,b);var d=a(c).height();a(c).css("font-size","12px").html("test");var e=a(c).height();return b.parentNode.removeChild(c),d!=e}function d(b,c){c=c instanceof Array?c:["left","top"];var d={};if("number"==typeof b&&(d.left=b),"string"==typeof b){var e=b.split(/\s+/);if(a.inArray("left",c)>=0){var f=a.inArray("left",e)>=0?0:a.inArray("center",e)>=0?.5:a.inArray("right",e)>=0?1:-1;f>=0&&(d.left=f)}if(a.inArray("top",c)>=0){var g=a.inArray("top",e)>=0?0:a.inArray("middle",e)>=0?.5:a.inArray("bottom",e)>=0?1:-1;g>=0&&(d.top=g)}for(var h,i=0;h=e[i];i++){var j=h.match(/([\+-]?\d+(?:\.\d+)?)(\%|px)?/);if(j){var k=parseFloat(j[1]),l=j[2],m=-1;"%"==l&&(m=Math.max(0,Math.min(k/100,1)),m=k/100),m>=0&&("undefined"==typeof d[c[0]]?d[c[0]]=m:"undefined"==typeof d[c[1]]&&(d[c[1]]=m))}}}return d}function e(c){return"function"==typeof c?c:"string"==typeof c?function(d,e){var f=a(d).data(c);f="undefined"==typeof f?"":f;var g=a(e).data(c);return g="undefined"==typeof g?"":g,b(f,g)}:c instanceof Array?function(c,d){var e=a.inArray(c,array),f=a.inArray(d,array);return b(e,f)}:function(){return 0}}function f(b){var c=a.extend({},b,{align:a.extend({left:0,top:0},d(b.align),d(b.textAlign,["left"]),d(b.verticalAlign,["top"])),style:function(a){return"transform"!=a||g?a:"absolute"}(b.style),sort:e(b.sort),columns:"function"==typeof b.columns||"number"==typeof b.columns?b.columns:0,stack:function(b){return"boolean"==typeof b&&b&&(b="center bottom"),"string"==typeof b&&(b={align:b}),"object"==typeof b&&(b.align=a.extend({left:.5,top:1},d(b.align),d(b.textAlign,["left"]),d(b.verticalAlign,["top"])),b.sort=b.sort?e(b.sort):null,b.offset=function(a){return"function"==typeof a?a:"object"==typeof a?function(b){return{top:a.top*b,left:a.left*b}}:"auto"}(b.offset)),b}(b.stack)});return c}var g=function(a,b){for(var c=document.createElement("div"),d=a.charAt(0).toUpperCase()+a.slice(1),e=0;e<b.length;e++)if("undefined"!=typeof c.style[b[e]+d])return b[e]+d;return null}("transform",["","Moz","Webkit","O","Ms"]);jQuery.fn.extend({layout:function(b){b=a.extend({},{sort:!1,stack:!1,style:"absolute"},b);var d=f(b),e=this,h=e.toArray();h.sort(d.sort);var i=[],j=[];a(h).each(function(b,c){var d=a(c).offsetParent()[0],e=a.inArray(d,i);0>e&&(i.push(d),e=i.length-1);var f=j[e]=j[e]||[];f.push(c)}),a(i).each(function(b,f){var i=this,k=a(this);k.css("height","");var l=k.innerWidth(),m=k.innerHeight(),n=a(j[b]),o=[],p={elems:[],left:0,top:0,width:0,height:0},q=[p],r=0,s=[{width:0,height:0,sets:[p]}],t=s[0],u="function"==typeof d.columns?d.columns.call(this,0):d.columns;a(n).each(function(b,c){var f=a(c);f.css({position:"relative",left:"",top:""}),g&&f.css(g,"");var i=h[b+1],j=f.outerWidth(!0),k=f.outerHeight(!0),m={width:j,height:k,elem:this};o.push(m),p.elems.push(m),p.width=Math.max(p.width,j);var v=!1,w=d.stack&&d.stack.sort?d.stack.sort:d.sort,x=!d.stack&&b<n.length-1||b>0&&w&&0!=w.call(e,c,i);x&&(v=b>0&&(u>0&&t.sets.length+1>u||0==u&&p.left+p.width+j>=l),v&&(t={width:0,height:0,sets:[]},s.push(t),u="function"==typeof d.columns?d.columns.call(this,s.length-1):d.columns)),x&&b<n.length-1&&(p={width:j,height:0,left:v?0:p.left+p.width,top:r,elems:[]},q.push(p),t.sets.push(p)),t.width=p.left+p.width});for(var v,w=0;v=s[w];w++){v.height=0;for(var x,y=0;x=v.sets[y];y++){for(var z,A={left:0,top:0},B=0;z=x.elems[B];B++){var f=z.elem,C=(z.height,z.height,d.stack&&"function"==typeof d.stack.offset);A=C?d.stack.offset.call(f,B,n.length,A):A,z.offset={left:A.left,top:A.top},C||(A.top+=a(f).height())}x.elems.sort(function(a,b){return a.offset.top-b.offset.top}),x.height=x.elems[x.elems.length-1].offset.top+x.elems[x.elems.length-1].height,v.height=Math.max(v.height,x.height),x.top=r}r+=v.height}for(var v,w=0;v=s[w];w++)for(var x,y=0;x=v.sets[y];y++)for(var z,B=0;z=x.elems[B];B++){var f=z.elem,D=(z.height,z.height,l>=0?Math.max((l-v.width)*d.align.left,0):0),E=m>=0?Math.max((m-r)*d.align.top,0):0,F=D+x.left,G=E+x.top;d.stack&&(G+=(v.height-x.height)*(d.stack.align.top?d.stack.align.top:0)),z.stackIndex=B,z.set=x,F+=z.offset.left,G+=z.offset.top,z.left=F,z.top=G}return o.sort(function(a,b){var c=(a.set.top-b.set.top)*(a.set.left-b.set.left);return 0==c?a.stackIndex-b.stackIndex:void 0}),a(o).each(function(b,c){var e=c.left,f=c.top,h=o.length-b,i={};"transform"==d.style?(i[g]="translate("+e+"px, "+f+"px)",i.position="absolute",i.zIndex=h):"absolute"==d.style&&(i.position="absolute",i.left=e+"px",i.top=f+"px",i.zIndex=h),a(c.elem).css(i)}),void(c(i)&&k.css({height:r,position:"relative"}));var w,v,y,x,n})}})}(jQuery,window);