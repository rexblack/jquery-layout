/*! jquery-layout 15-10-2014 */
!function(a,b){function c(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a}function d(a,b){if("number"==typeof a&&"number"==typeof b)return a-b;if(!a&&!b)return 0;if(!a&&b)return 1;if(a&&!b)return-1;var c,d,e,f,g,h,i=0,j=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g;if(a===b)return 0;for(c=a.toLowerCase().match(j),d=b.toLowerCase().match(j),h=c.length;h>i;){if(!d[i])return 1;if(e=c[i],f=d[i++],e!==f)return g=e-f,isNaN(g)?e>f?1:-1:g}return d[i]?-1:0}function e(b){var c=b.cloneNode();c.style.height="",b.parentNode.insertBefore(c,b);var d=a(c).height();a(c).css("font-size","12px").html("test");var e=a(c).height();return b.parentNode.removeChild(c),d!=e}function f(b){var c=b.cloneNode();c.style.height="",b.parentNode.insertBefore(c,b);var d=a(c).width();a(c).css("font-size","12px").html("test");var e=a(c).width();return b.parentNode.removeChild(c),d!=e}function g(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})}function h(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function i(b,c,d){c=c instanceof Array?c:["left","top"];var e={};if("number"==typeof b&&(e.left=b),"string"==typeof b){var f=b.split(/\s+/);if(a.inArray("left",c)>=0){var g=a.inArray("left",f)>=0?0:a.inArray("center",f)>=0?.5:a.inArray("right",f)>=0?1:-1;g>=0&&(e.left=g)}if(a.inArray("top",c)>=0){var h=a.inArray("top",f)>=0?0:a.inArray("middle",f)>=0?.5:a.inArray("bottom",f)>=0?1:-1;h>=0&&(e.top=h)}for(var i,j=0;i=f[j];j++){var k=i.match(/([\+-]?\d+(?:\.\d+)?)(\%|px)?/);if(k){var l=parseFloat(k[1]),m=k[2],n=-1;"%"==m&&(n=Math.max(0,Math.min(l/100,1)),n=l/100),n>=0&&("undefined"==typeof e[c[0]]?e[c[0]]=n:"undefined"==typeof e[c[1]]&&(e[c[1]]=n))}}}return e.left="undefined"!=typeof d&&"undefined"==typeof e.left?d:e.left,e.top="undefined"!=typeof d&&"undefined"==typeof e.top?d:e.top,e}function j(b){return"function"==typeof b?b:("shuffle"==b&&(b=this.toArray(),b=c(b)),"string"==typeof b?function(c,e){var f=a(c).data(b);f="undefined"==typeof f?"":f;var g=a(e).data(b);return g="undefined"==typeof g?"":g,d(f,g)}:b instanceof Array?function(c,e){var f=a.inArray(c,b),g=a.inArray(e,b);return d(f,g)}:function(){return 0})}function k(b){var c=a.extend({},b,{align:a.extend({},i(b.align),i(b.textAlign,["left"]),i(b.verticalAlign,["top"])),style:function(b){return"string"==typeof b&&(b=b.split(/\s+/)),a.grep(b,function(b){return a.inArray(b,r)>=0}),b}(b.style),sort:j.call(this,b.sort),columns:"function"==typeof b.columns||"number"==typeof b.columns?b.columns:0,stack:function(b){return"boolean"==typeof b&&b&&(b="center bottom"),"string"==typeof b&&(b={align:b}),"object"==typeof b&&(b.align=a.extend({left:.5,top:1},i(b.align),i(b.textAlign,["left"]),i(b.verticalAlign,["top"])),b.sort=b.sort?j.call(this,b.sort):null,b.offset=function(a){return"function"==typeof a?a:"object"==typeof a?function(b){return{top:a.top*b,left:a.left*b}}:"auto"}(b.offset)),b}(b.stack),item:function(b){return"string"==typeof b&&(b={selector:b}),a.extend({},{selector:" > *",offset:{top:0,left:0}},b)}(b.item)});return c}function l(a){return a.align=a.align||{},a.align.left="undefined"!=typeof a.align.left&&"auto"!=a.align.left?a.align.left:i(this.css("textAlign"),["left"],0).left,a.align.top="undefined"!=typeof a.align.top&&"auto"!=a.align.top?a.align.top:i(this.css("verticalAlign"),["top"],0).top,a.gutter=a.gutter||{},a.gutter.left="undefined"!=typeof a.gutter.left&&"auto"!=a.gutter.left?a.gutter.left:parseFloat(this.css("marginLeft")),a.gutter.top="undefined"!=typeof a.gutter.top&&"auto"!=a.gutter.top?a.gutter.top:parseFloat(this.css("marginTop")),a.gutter.right="undefined"!=typeof a.gutter.right&&"auto"!=a.gutter.right?a.gutter.right:parseFloat(this.css("marginRight")),a.gutter.bottom="undefined"!=typeof a.gutter.bottom&&"auto"!=a.gutter.bottom?a.gutter.bottom:parseFloat(this.css("marginBottom")),a}function m(c,d){function g(){h.render()}var h=this,i=a(c);this.elem=c;var j=n("transform"),m={css:{fontSize:c.style.fontSize,textAlign:c.style.textAlign,verticalAlign:c.style.verticalAlign,width:c.style.width,height:c.style.height},wrappers:[]};m.css[n("flex-wrap")]=c.style[n("flex-wrap")],m.css[n("align-items")]=c.style[n("align-items")],this.render=function(c){var d=(new Date).getTime();this.options=a.extend({},q,this&&this.options,c);var h=this.options;h=k.call(i,h);var o=i.find(h.item.selector).not("br").toArray();o.sort(h.sort),h=l.call(i,h),a(b).off("resize",g),h.bindResize&&a(b).on("resize",g);var p=h.style[0],r=a.grep(o,function(b){return a(b).is(":visible")}),s=[],t=0,u=0,v={elems:[],left:0,top:0,width:0,height:0},w=[{width:0,height:0,columns:[v],elems:[]}],x=w[0],y="function"==typeof h.columns?h.columns.call(this,0):h.columns;a(r).each(function(b,c){var d=a(c),e=r[b+1],f=d.outerWidth(!0),g=d.outerHeight(!0),i={elem:c,width:f,height:g};s.push(i),v.elems.push(i),v.width=Math.max(v.width,f),x.elems.push(c);var j=h.stack&&h.stack.sort?h.stack.sort:h.sort,k=!1,l=!h.stack&&b<r.length-1||j&&0!=j.call(r,c,e);if(l){var m=b>0&&y>0&&x.columns.length+1>y,n=b<r.length-1&&v.left+v.width+f>=K;x.isBreak=v.isBreak=m,x.isWrap=v.isWrap=n,k=m||n,k&&(x={width:0,height:0,elems:[],columns:[]},w.push(x),y="function"==typeof h.columns?h.columns.call(this,w.length-1):h.columns)}l&&b<r.length-1&&(v={width:f,height:0,left:k?0:v.left+v.width,top:0,elems:[]},x.columns.push(v)),x.width=v.left+v.width});for(var z,A=0;z=w[A];A++){z.height=0;for(var B,C=0;B=z.columns[C];C++){B.offset="function"==typeof h.item.offset?h.item.offset.call(a(B.elems),C,z.columns.length):{top:h.item.offset.top*C,left:h.item.offset.left*C};for(var D,E={left:0,top:0},F=0;D=B.elems[F];F++){var G=D.elem,H=(D.height,D.height,h.stack&&"function"==typeof h.stack.offset);E=H?h.stack.offset.call(G,F,r.length,E):E,D.offset={left:E.left,top:E.top},H||(E.top+=a(G).height())}B.elems.sort(function(a,b){return a.offset.top-b.offset.top}),B.height=B.elems.length>0?B.elems[B.elems.length-1].offset.top+B.elems[B.elems.length-1].height:0,z.height=Math.max(z.height,B.height),B.top=u}t=Math.max(z.width,t),u+=z.height}var I=this.elem,J=i;J.css({width:"",height:""});for(var z,K=J.innerWidth(),L=J.innerHeight(),M={left:parseFloat(J.css("paddingLeft")),top:parseFloat(J.css("paddingTop")),right:parseFloat(J.css("paddingRight")),bottom:parseFloat(J.css("paddingBottom"))},N=K-M.left-M.right,O=L-M.top-M.bottom,P=M.left+M.right+t,Q=M.top+M.bottom+u,A=0;z=w[A];A++)for(var B,C=0;B=z.columns[C];C++)for(var D,F=0;D=B.elems[F];F++){var G=D.elem,R=(D.height,D.height,N>=0?Math.max((N-z.width)*h.align.left,0):0),S=O>=0?Math.max((O-u)*h.align.top,0):0,T=M.left,U=M.top;T+=R+B.left,U+=S+B.top,T+=B.offset.left,U+=B.offset.top,h.stack&&(U+=(z.height-B.height)*(h.stack.align.top?h.stack.align.top:0)),D.row=z,D.rowIndex=A,D.column=B,D.columnIndex=C,D.stackIndex=F,T+=D.offset.left,U+=D.offset.top,D.left=T,D.top=U,D.isBreak=F==B.elems.length-1?B.isBreak:!1,D.isWrap=F==B.elems.length-1?B.isWrap:!1}r=a.map(s,function(a){return a.elem});var V=a(s);if("absolute"==p)V.each(function(b,c){var d={position:"absolute",left:c.left+"px",top:c.top+"px",zIndex:c.column.elems.length-c.stackIndex,display:"block"};d[j]="",a(c.elem).css(d)});else if("transform"==p)V.each(function(b,c){var d={position:"absolute",left:"0px",top:"0px",zIndex:c.column.elems.length-c.stackIndex,display:"block",fontSize:""};d[j]="translate("+c.left+"px, "+c.top+"px)",a(c.elem).css(d)});else if("static"==p){J.css("font-size","");var W=J.css("font-size");h.sort&&J.append(r),V.each(function(b,c){var d={position:"static",display:"inline-block"},e=a(G).css("fontSize");e==W&&(d.fontSize=W),d[j]="",a(c.elem).css(d)})}else V.each("flex"==p?function(b,c){var d={position:"static",display:"block",fontSize:""};d[n("order")]=b,d[j]="",a(c.elem).css(d)}:function(b,c){var d={position:"",display:"",fontSize:"",zIndex:"",top:"",left:""};d[n("order")]="",d[j]="",a(c.elem).css(d)});var X={position:"",width:"",height:"",textAlign:"",verticalAlign:"",display:"",fontSize:""};if(X[n("flex-wrap")]="",X[n("justify-content")]="",X[n("flex-direction")]="","absolute"==p||"transform"==p){var Y=J.css("position");"static"==Y&&(X.position="relative"),e(I)&&(X.height=Q),f(I)&&(X.width=P)}if("static"==p||"flex"==p){X.fontSize="0",X.textAlign=.5==h.align.left?"center":1==h.align.left?"right":"left",X.verticalAlign=.5==h.align.top?"middle":1==h.align.top?"bottom":"bottom",X.height="auto";var Z=m.wrappers=function(b){for(var c,d=[],e=[],f=0;c=s[f];f++)if(d.push(c.elem),c.isBreak||e.length&&f==s.length-1){var g=b[h]||document.createElement("div");a(g).append(d),e.push(g),d=[]}for(var h=e.length;h<b.length;h++)a(b[h]).remove();return e}(m.wrappers);if("flex"==p){var $={};$.display="flex",$[n("flex-wrap")]="wrap",$[n("justify-content")]=.5==h.align.left?"center":1==h.align.left?"flex-end":"flex-start",$[n("flex-direction")]="row",Z.length?a.each(Z,function(b,c){a(c).css($)}):a.extend(X,$)}J.append(Z)}else a(m.wrappers).each(function(){a(this).remove()}),m.wrappers=[],J.append(r);J.css(X);var _=(new Date).getTime()-d;"function"==typeof h.render&&h.render.call(J,h,_)},this.render(d)}var n=function(){var a={},b=["Webkit","Moz","O","Ms"],c=document.createElement("div");return function(d,e){var f=g(d);e="boolean"==typeof e?e:!1;var i=a[f]="undefined"!=typeof a[f]?a[f]:function(a){var d=null;if(document.documentElement.appendChild(c),"string"==typeof c.style[a]&&(d=a),!d)for(var e=a.substring(0,1).toUpperCase()+a.substring(1),f=0;f<b.length;f++){var g=b[f]+e;if("string"==typeof c.style[g]){d=g;break}}return c.parentNode.removeChild(c),d}(f);return i&&e&&(i=h(i)),i}}(),o=function(){var a;return function(){return"undefined"!=typeof a?a:a=function(){var a=document.createElement("div");return a.style.display="flex","flex"===a.style.display}()}}(),p="layout",q={align:"auto",bindResize:!0,sort:!1,stack:!1,style:"absolute",item:{offset:{left:0,top:0}}},r=function(b){return a.grep(b,function(a){return("transform"!=a||n("transform"))&&("flex"!=a||o())?!0:!1})}(["flex","transform","absolute","static"]);jQuery.fn[p]=function(b){return this.each(function(){var c=a(this).data(p);return c?c.render(b):c=a(this).data(p,new m(this,b)),a(this)})}}(jQuery,window);