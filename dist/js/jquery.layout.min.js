/*! jquery-layout 05-10-2014 */
!function(a){function b(a,b){if("number"==typeof a&&"number"==typeof b)return a-b;if(!a&&!b)return 0;if(!a&&b)return 1;if(a&&!b)return-1;var c,d,e,f,g,h,i=0,j=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g;if(a===b)return 0;for(c=a.toLowerCase().match(j),d=b.toLowerCase().match(j),h=c.length;h>i;){if(!d[i])return 1;if(e=c[i],f=d[i++],e!==f)return g=e-f,isNaN(g)?e>f?1:-1:g}return d[i]?-1:0}function c(b){var c=b.cloneNode();c.style.height="",b.parentNode.insertBefore(c,b);var d=a(c).height();a(c).css("font-size","12px").html("test");var e=a(c).height();return b.parentNode.removeChild(c),d!=e}var d=function(a,b){for(var c=document.createElement("div"),d=a.charAt(0).toUpperCase()+a.slice(1),e=0;e<b.length;e++)if("undefined"!=typeof c.style[b[e]+d])return b[e]+d;return null}("transform",["","Moz","Webkit","O","Ms"]);jQuery.fn.extend({layout:function(e){e=a.extend({},{textAlign:"left",key:"",sort:!0,stack:!0,orientation:"horizontal",stackOffset:"auto",style:"transform"},e);var f=a.extend({},e,{style:function(a){return"transform"!=a||d?a:"absolute"}(e.style),sort:function(c){return"function"==typeof c?c:"string"==typeof c?function(d,e){var f=a(d).data(c);f="undefined"==typeof f?"":f;var g=a(e).data(c);return g="undefined"==typeof g?"":g,b(f,g)}:c instanceof Array?function(c,d){var e=a.inArray(c,array),f=a.inArray(d,array);return b(e,f)}:function(){return 0}}(e.sort),columns:"function"==typeof e.columns||"number"==typeof e.columns?e.columns:0,stack:function(b){if("boolean"==typeof b&&b&&(b="center bottom"),"object"==typeof b&&(b.textAlign="number"==typeof b.textAlign?b.textAlign:b.textAlign.match(/center/)?.5:b.textAlign.match(/right/)?1:0,b.verticalAlign="number"==typeof b.verticalAlign?b.verticalAlign:b.verticalAlign.match(/middle/)?.5:b.verticalAlign.match(/bottom/)?1:0),"string"==typeof b){var c=b.split(/\s+/);b={textAlign:a.inArray("center",c)>=0?.5:a.inArray("right",c)>=0?1:0,verticalAlign:a.inArray("middle",c)>=0?.5:a.inArray("bottom",c)>=0?1:0}}return b}(e.stack),stackOffset:function(a){return"function"==typeof a?a:"object"==typeof a?function(b){return{top:a.top*b,left:a.left*b}}:"auto"}(e.stackOffset),itemOffset:function(a){return"function"==typeof a?a:"object"==typeof a?function(b){return{top:a.top*b,left:a.left*b}}:"auto"}(e.itemOffset),textAlign:function(a){return"number"==typeof a?a:"string"==typeof a?a.match(/center/)?.5:a.match(/right/)?1:0:0}(e.textAlign),verticalAlign:function(a){return"number"==typeof a?a:"string"==typeof a?a.match(/middle/)?.5:a.match(/bottom/)?1:0:0}(e.verticalAlign)}),g=this.toArray();g.sort(f.sort);var h=[],i=[];a(g).each(function(b,c){var d=a(c).offsetParent()[0],e=a.inArray(d,h);0>e&&(h.push(d),e=h.length-1);var f=i[e]=i[e]||[];f.push(c)}),a(h).each(function(b,h){var j=this,k=a(this);k.css("height","");var l=k.innerWidth(),m=k.innerHeight(),n=a(i[b]),o=[],p={elems:[],left:0,top:0,width:0,height:0},q=[p],r=0,s=[{width:0,height:0,sets:[p]}],t=s[0],u="function"==typeof f.columns?f.columns.call(this,0):f.columns;a(n).each(function(b,c){var d=a(c);d.css({position:"relative",left:"0px",top:"0px"});var h=g[b+1],i=d.outerWidth(!0),j=d.outerHeight(!0),k={width:i,height:j,elem:this};o.push(k),p.elems.push(k),p.width=Math.max(p.width,i);var m=!f.stack&&b<n.length-1||b>0&&e.sort&&0!=f.sort(c,h);if(m||b==n.length-1){t.width+=p.width;var v=b>0&&(u>0&&t.sets.length+1>u||0==u&&t.width>l);v&&(t={width:0,height:0,sets:[]},s.push(t),u="function"==typeof f.columns?f.columns.call(this,s.length-1):f.columns)}m&&(p={width:i,height:0,left:t.width,top:r,elems:[]},q.push(p),t.sets.push(p))});for(var v,w=0;v=s[w];w++){v.height=0;for(var x,y=0;x=v.sets[y];y++){for(var z,A={left:0,top:0},B=0;z=x.elems[B];B++){var h=z.elem,C=(z.height,z.height,"function"==typeof f.stackOffset);A=C?f.stackOffset.call(h,B,n.length,A):A,z.offset={left:A.left,top:A.top},C||(A.top+=a(h).height())}x.elems.sort(function(a,b){return a.offset.top-b.offset.top}),x.height=x.elems[x.elems.length-1].offset.top+x.elems[x.elems.length-1].height,v.height=Math.max(v.height,x.height),x.top=r}r+=v.height}o.sort(function(a,b){return(a.offset.top-b.offset.top)*(a.offset.left-b.offset.left)});for(var v,w=0;v=s[w];w++)for(var x,y=0;x=v.sets[y];y++)for(var z,B=0;z=x.elems[B];B++){var h=z.elem,D=(z.height,z.height,l>=0?Math.max((l-v.width)*f.textAlign,0):0),E=m>=0?Math.max((m-r)*f.verticalAlign,0):0,F=D+x.left,G=E+x.top+(v.height-x.height)*(f.stack.verticalAlign?f.stack.verticalAlign:0);F+=z.offset.left,G+=z.offset.top,z.left=F,z.top=G}return a(o).each(function(b,c){var e=c.left,g=c.top,h={position:"absolute",zIndex:o.length-b};"transform"==f.style?h[d]="translate("+e+"px, "+g+"px)":(h.left=e+"px",h.top=g+"px"),a(c.elem).css(h)}),void(c(j)&&k.css("height",r));var w,v,y,x,n})}})}(jQuery,window);